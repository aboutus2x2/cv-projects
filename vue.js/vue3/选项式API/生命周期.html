<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="./js/vue.global.js"></script>
</head>

<body>
    <div id="app">
        <div>
            <div>{{count}}</div>
            <button @click="count++">+</button>
        </div>
    </div>
</body>
<script>
    // 知识点：
    // api: https://cn.vuejs.org/api/options-lifecycle.html
    // 示意图: https://cn.vuejs.org/guide/essentials/lifecycle.html#lifecycle-diagram
    // 什么是生命周期
    // 应用场景
    // setup
    // beforeCreate
    // created
    // beforeMount
    // mounted
    // beforeUpdate
    // updated
    // beforeUnmount
    // unmounted


    // 什么是生命周期
    // 以人来类比，生命周期就是从出生到入土的过程
    // 按照程序来说，就是用函数的形式来体现组件的生老病死的过程
    // 所以说，生命周期本质就是函数（生命周期钩子函数），会在vue组件生老病死的不同时间进行调用


    // 应用场景
    // 若希望在vue生命周期过程中执行自己想要执行的代码，则需要使用生命周期函数
    // 例如: 
    // 1. 通过网络请求获取数据的代码就可以放到 mounted 函数中
    // 2. 给页面绑定全局对象的事件时 如：window.onresize 事件，可以放到 created 函数中
    // 3. 在 beforeUnmount 中可以注销某些全局事件


    const App = {
        data() {
            return {
                count: 0
            }
        },
        // 以下是生命周期函数
        // setup 组合式api执行的地方
        setup() {
            console.log('setup')
            // setup 中不能使用 this
            // 因为在该过程中 vm 实例对象还没有创建
        },
        // 创建vue对象前
        beforeCreate() {
            console.log(this)
            console.log('beforeCreate');
        },
        // vue对象创建完成后
        created() {
            console.log('created');
        },
        // 挂在前
        beforeMount() {
            console.log('beforeMount');
        },
        // 挂在完成
        mounted() {
            console.log('mounted');
        },
        // 更新前
        beforeUpdate() {
            console.log('beforeUpdate');
        },
        // 更新完成
        updated() {
            console.log('updated');
        },
        // 卸载前
        beforeUnmount() {
            console.log('beforeUnmount');
        },
        // 卸载完成
        unmounted() {
            console.log('unmounted');
        }
    }

    let app = Vue.createApp(App)
    let vm = app.mount('#app')

    // 触发 beforeUnmount 和 unmounted 生命周期
    // 可以使用 app.unmount() 方法

</script>

</html>